<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="UTF-8">

<!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Borealis (Dataverse) &amp; Github Pages Demos | Examples and code for using Github Pages with Dataverse</title>
<meta name="generator" content="Jekyll v4.2.2" />
<meta property="og:title" content="Borealis (Dataverse) &amp; Github Pages Demos" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Examples and code for using Github Pages with Dataverse" />
<meta property="og:description" content="Examples and code for using Github Pages with Dataverse" />
<link rel="canonical" href="http://localhost:4000/" />
<meta property="og:url" content="http://localhost:4000/" />
<meta property="og:site_name" content="Borealis (Dataverse) &amp; Github Pages Demos" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Borealis (Dataverse) &amp; Github Pages Demos" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"WebSite","description":"Examples and code for using Github Pages with Dataverse","headline":"Borealis (Dataverse) &amp; Github Pages Demos","name":"Borealis (Dataverse) &amp; Github Pages Demos","url":"http://localhost:4000/"}</script>
<!-- End Jekyll SEO tag -->

    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link rel="preload" href="https://fonts.googleapis.com/css?family=Open+Sans:400,700&display=swap" as="style" type="text/css" crossorigin>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="theme-color" content="#157878">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">    <script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="/assets/css/style.css?v=">
    <link rel="stylesheet" href="./assets/css/navbar.css">
    <link rel="stylesheet" href="./assets/css/demos.css">

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.min.js" integrity="sha384-QJHtvGhmr9XOIpI6YVutG+2QOK9T+ZnN4kzFN1RtK3zEFEIsxhlmWl5/YESvpZ13" crossorigin="anonymous"></script>    <script src="/assets/js/demos.js" defer></script>
    <!-- start custom head snippets, customize with your own _includes/head-custom.html file -->

<!-- Setup Google Analytics -->



<!-- You can set your favicon here -->
<!-- link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" -->

<!-- end custom head snippets -->

  </head>
  <body>
    <a id="skip-to-content" href="#content">Skip to the content.</a>

      <ul class="navbar">
        
           <li class="nav-item"><a href="/index">Images</a></li>
        
           <li class="nav-item"><a href="/audio-video">Audio/Video</a></li>
        
           <li class="nav-item"><a href="/csvs">CSVs</a></li>
        
           <li class="nav-item"><a href="/maps">Maps</a></li>
        
      </ul>


    <header class="page-header" role="banner">
      <h1 class="project-name">Borealis (Dataverse) & Github Pages Demos</h1>
      <h2 class="project-tagline">Examples and code for using Github Pages with Dataverse</h2>
      
      
        <a href="" class="btn">Download .zip</a>
        <a href="" class="btn">Download .tar.gz</a>
      
    </header>

    <main id="content" class="main-content" role="main">
      <h1 id="zoom-and-pan-image-viewer">Zoom and Pan Image Viewer</h1>

<script src="https://zoomhub.net/2aMlm.js?width=750px&amp;height=auto&amp;border=none"></script>

<p><br /></p>
<ol>
  <li>Visit the Borealis page for the image file you want to embed (<a href="https://borealisdata.ca/file.xhtml?fileId=99467&amp;datasetVersionId=19053">example</a>).</li>
  <li>On the “Page Metadata” tab, copy the Download URL. It should look something like this: <code class="language-plaintext highlighter-rouge">https://borealisdata.ca/api/access/datafile/99467</code>.</li>
  <li>Go to <a href="https://zoomhub.net/">Zoomhub.net</a>. Click “I have an image link” and paste the Download URL.</li>
  <li>When Zoomhub is finished processing the image, open the link in your email.</li>
  <li>Click the “embed” link at the bottom of the page. This will copy the link to your clipboard.</li>
  <li>Paste it in your HTML or Markdown file. To edit the size of the embedded viewer, change the number after width (e.g. <code class="language-plaintext highlighter-rouge">width=500px</code>).</li>
</ol>

<p><span style="margin-left:2.5rem;"><code class="language-plaintext highlighter-rouge">&lt;script src="https://zoomhub.net/2aMlm.js?width=500px&amp;height=auto&amp;border=none"&gt;&lt;/script&gt;</code></span></p>

<p>For batches of images, see <a href="#zoomable-viewer-for-all-images-in-a-dataset">Zoomable Viewer for All Images in a Dataset</a>.</p>

<h1 id="image-gallery">Image Gallery</h1>

<div id="simple-thumb-gallery"></div>

<ol>
  <li>If JQuery isn’t already included in your site, copy/paste the following in your <code class="language-plaintext highlighter-rouge">&lt;head&gt;</code> tag in your HTML:
  <code class="language-plaintext highlighter-rouge">&lt;script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"&gt;&lt;/script&gt;</code></li>
  <li>Insert an <code class="language-plaintext highlighter-rouge">&lt;div&gt;</code> in your HTML where you want the images to render:
  <code class="language-plaintext highlighter-rouge">&lt;div id="thumb-gallery"&gt;&lt;/div&gt;</code></li>
  <li>Copy/paste the following Javascript and
    <ul>
      <li>replace <code class="language-plaintext highlighter-rouge">[pid]</code> with your dataset’s unique, persistent identifier in Borealis.</li>
      <li>replace <code class="language-plaintext highlighter-rouge">[base_url]</code> with <code class="language-plaintext highlighter-rouge">https://borealisdata.ca</code> (Borealis) or <code class="language-plaintext highlighter-rouge">https://demo.borealisdata.ca</code> (demo Borealis).</li>
    </ul>
  </li>
</ol>

<p><a href="https://codepen.io/eltiffster/pen/rNdadPK">Example on CodePen</a>   <img aria-hidden="true" src="/assets/images/play.svg" class="arrow" /><a data-bs-toggle="collapse" role="button" href="#thumb-gallery-code" aria-controls="thumb-gallery-code" aria-expanded="false">Expand/collapse JavaScript</a></p>

<div class="collapse" id="thumb-gallery-code">
  <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">$</span><span class="p">(</span><span class="nb">document</span><span class="p">).</span><span class="nx">ready</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>

    <span class="kd">var</span> <span class="nx">pid</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">[pid]</span><span class="dl">"</span><span class="p">;</span> <span class="c1">// the persistent ID for your dataset</span>
    <span class="kd">var</span> <span class="nx">baseUrl</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">[base_url]</span><span class="dl">"</span><span class="p">;</span> <span class="c1">// The domain of the dataverse site</span>
    <span class="kd">var</span> <span class="nx">url</span> <span class="o">=</span> <span class="nx">baseUrl</span> <span class="o">+</span> <span class="dl">"</span><span class="s2">/api/datasets/:persistentId/?persistentId=</span><span class="dl">"</span> <span class="o">+</span> <span class="nx">pid</span> <span class="c1">// The url to make a request to</span>

    <span class="c1">// This is a call to the Borealis/Dataverse API to retrieve all datafiles in a dataset</span>
    <span class="c1">// See "List Files in a Dataset"</span>
    <span class="c1">// https://guides.dataverse.org/en/latest/api/native-api.html</span>
    <span class="nx">$</span><span class="p">.</span><span class="nx">ajax</span><span class="p">({</span>
        <span class="na">url</span><span class="p">:</span> <span class="nx">url</span><span class="p">,</span>
        <span class="na">type</span><span class="p">:</span> <span class="dl">"</span><span class="s2">GET</span><span class="dl">"</span><span class="p">,</span>
        <span class="na">success</span><span class="p">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span> <span class="nx">parseImageData</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span> <span class="p">}</span>
    <span class="p">});</span>

    <span class="kd">function</span> <span class="nx">parseImageData</span><span class="p">(</span><span class="nx">response</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">let</span> <span class="nx">files</span> <span class="o">=</span> <span class="nx">response</span><span class="p">[</span><span class="dl">'</span><span class="s1">data</span><span class="dl">'</span><span class="p">][</span><span class="dl">'</span><span class="s1">latestVersion</span><span class="dl">'</span><span class="p">][</span><span class="dl">'</span><span class="s1">files</span><span class="dl">'</span><span class="p">];</span>
        <span class="kd">let</span> <span class="nx">arr</span> <span class="o">=</span> <span class="p">[];</span>
        <span class="c1">// Filter out everything except image files</span>
        <span class="k">for</span><span class="p">(</span><span class="nx">file</span> <span class="k">in</span> <span class="nx">files</span><span class="p">)</span> <span class="p">{</span> <span class="nx">arr</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">files</span><span class="p">[</span><span class="nx">file</span><span class="p">])</span> <span class="p">}</span>
        <span class="kd">let</span> <span class="nx">images</span> <span class="o">=</span> <span class="nx">arr</span><span class="p">.</span><span class="nx">filter</span><span class="p">(</span><span class="nx">file</span> <span class="o">=&gt;</span> <span class="nx">file</span><span class="p">.</span><span class="nx">dataFile</span><span class="p">.</span><span class="nx">contentType</span><span class="p">.</span><span class="nx">includes</span><span class="p">(</span><span class="dl">"</span><span class="s2">image</span><span class="dl">"</span><span class="p">));</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">images</span><span class="p">);</span>
        <span class="c1">// generate the HTML for each thumbnail</span>
        <span class="nx">$</span><span class="p">(</span><span class="dl">'</span><span class="s1">#thumb-gallery</span><span class="dl">'</span><span class="p">).</span><span class="nx">append</span><span class="p">(</span><span class="nx">images</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="nx">im</span> <span class="o">=&gt;</span> <span class="nx">thumbTemplate</span><span class="p">(</span><span class="nx">im</span><span class="p">)));</span>
    <span class="p">}</span>

    <span class="kd">function</span> <span class="nx">thumbTemplate</span><span class="p">(</span><span class="nx">image</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// The streaming link for a file, used to display the image</span>
        <span class="kd">let</span> <span class="nx">fileLink</span> <span class="o">=</span> <span class="nx">baseUrl</span> <span class="o">+</span> <span class="dl">"</span><span class="s2">/api/access/datafile/</span><span class="dl">"</span> <span class="o">+</span> <span class="nx">image</span><span class="p">.</span><span class="nx">dataFile</span><span class="p">.</span><span class="nx">id</span><span class="p">;</span>
        <span class="c1">// The link to that file's page in Borealis</span>
        <span class="kd">let</span> <span class="nx">pageLink</span> <span class="o">=</span> <span class="nx">baseUrl</span> <span class="o">+</span> <span class="dl">"</span><span class="s2">/file.xhtml?fileId=</span><span class="dl">"</span> <span class="o">+</span> <span class="nx">image</span><span class="p">.</span><span class="nx">dataFile</span><span class="p">.</span><span class="nx">id</span><span class="p">;</span>
        <span class="c1">// The file title (taken from Dataverse)</span>
        <span class="kd">let</span> <span class="nx">title</span> <span class="o">=</span> <span class="nx">image</span><span class="p">.</span><span class="nx">label</span><span class="p">;</span>
        <span class="k">return</span> <span class="p">[</span>
            <span class="dl">'</span><span class="s1">&lt;a class="no-style" href="</span><span class="dl">'</span> <span class="o">+</span> <span class="nx">pageLink</span> <span class="o">+</span> <span class="dl">'</span><span class="s1">" target="_blank"&gt;</span><span class="dl">'</span><span class="p">,</span>
                <span class="dl">'</span><span class="s1">&lt;figure&gt;</span><span class="dl">'</span><span class="p">,</span>
                    <span class="dl">'</span><span class="s1">&lt;img class="thumb" src="</span><span class="dl">'</span> <span class="o">+</span> <span class="nx">fileLink</span> <span class="o">+</span> <span class="dl">'</span><span class="s1">" alt="</span><span class="dl">'</span> <span class="o">+</span> <span class="nx">image</span><span class="p">.</span><span class="nx">description</span> <span class="o">+</span> <span class="dl">'</span><span class="s1">"/&gt;</span><span class="dl">'</span><span class="p">,</span>
                    <span class="dl">'</span><span class="s1">&lt;figcaption&gt;</span><span class="dl">'</span> <span class="o">+</span> <span class="nx">title</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="dl">"</span><span class="s2">.</span><span class="dl">"</span><span class="p">)[</span><span class="mi">0</span><span class="p">].</span><span class="nx">replace</span><span class="p">(</span><span class="dl">'</span><span class="s1">_</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1"> </span><span class="dl">'</span><span class="p">)</span> <span class="o">+</span> <span class="dl">'</span><span class="s1">&lt;/figcaption&gt;</span><span class="dl">'</span><span class="p">,</span>
                <span class="dl">'</span><span class="s1">&lt;/figure&gt;</span><span class="dl">'</span><span class="p">,</span>
            <span class="dl">'</span><span class="s1">&lt;/a&gt;</span><span class="dl">'</span>
        <span class="p">].</span><span class="nx">join</span><span class="p">(</span><span class="dl">'</span><span class="se">\n</span><span class="dl">'</span><span class="p">);</span>
    <span class="p">}</span>

<span class="p">});</span>
</code></pre></div>  </div>
</div>

<h1 id="gallery-with-pop-up-viewer">Gallery with Pop-up Viewer</h1>

<p><strong>Note:</strong> If your dataset is mostly image-based, consider using <a href="https://minicomp.github.io/wax/">Wax</a> or your institution’s digital exhibit platform(s) instead (e.g. Omeka, Spotlight).</p>

<div id="viewer-thumb-gallery">
</div>

<div class="modal-script" data-modal-id="modal-15173"><script src="https://zoomhub.net/zayJq.js?width=650px&amp;height=auto&amp;border=none"></script></div>
<div class="modal-script" data-modal-id="modal-15167"><script src="https://zoomhub.net/p5NJO.js?width=650px&amp;height=auto&amp;border=none"></script></div>
<div class="modal-script" data-modal-id="modal-15172"><script src="https://zoomhub.net/MVYq5.js?width=650px&amp;height=auto&amp;border=none"></script></div>
<div class="modal-script" data-modal-id="modal-15170"><script src="https://zoomhub.net/0wVl5.js?width=650px&amp;height=auto&amp;border=none"></script></div>
<div class="modal-script" data-modal-id="modal-15169"><script src="https://zoomhub.net/NVk0k.js?width=650px&amp;height=auto&amp;border=none"></script></div>
<div class="modal-script" data-modal-id="modal-15171"><script src="https://zoomhub.net/Zxqrk.js?width=650px&amp;height=auto&amp;border=none"></script></div>

<div class="modal-container">
</div>

<p><a href="https://codepen.io/eltiffster/pen/MWVaEyZ">Example on CodePen</a>   <img aria-hidden="true" src="/assets/images/play.svg" class="arrow" /><a data-bs-toggle="collapse" role="button" href="#viewer-gallery-code" aria-controls="thumb-gallery-code" aria-expanded="false">Expand/collapse JavaScript</a></p>

<h2 id="zoomable-viewer-for-all-images-in-a-dataset">Zoomable Viewer for All Images in a Dataset</h2>

<p>We have two options:</p>
<ol>
  <li>Upload our images programmatically to Zoomhub using <a href="https://zoomhub.net/#api">their API</a> (note that you need to request access to upload a large number of files).</li>
  <li>Use a Python script (or another programming language) to create DZI (Deep Zoom Image) files and then store/serve them from your Github Pages site.</li>
</ol>

<table>
  <thead>
    <tr>
      <th>Option</th>
      <th>Pros</th>
      <th>Cons</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Zoomhub API</td>
      <td>- Don’t need to generate or host images yourself, or re-download content from Borealis/Dataverse</td>
      <td>- Requires a stable internet connection to Zoomhub<br />- Need to wait for Zoomhub to process your images<br />- No control over whatever happens to Zoomhub (i.e. if Zoomhub disappears, so do your zoomable images)</td>
    </tr>
    <tr>
      <td>Local Images</td>
      <td>- Don’t need to worry about Zoomhub going down<br />- Don’t need a stable connection to Zoomhub</td>
      <td>- Takes some work and time to generate images</td>
    </tr>
  </tbody>
</table>

<h3 id="option-1-zoomhub">Option 1: Zoomhub</h3>

<h4 id="upload-to-zoomhub">Upload to Zoomhub</h4>

<p>Using Python (or another programming language of your choice), you can</p>
<ol>
  <li>collect/loop through all images in your dataset</li>
  <li>push their URLs to Zoomhub</li>
  <li>collect the resulting URLs to use on your site. The result should be a list of dictionaries or JSON objects in this format:
    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[
 { 'fileId': '15173', 'title': 'Aconcagua', 'embedUrl': 'https://zoomhub.net/zayJq' },
 { 'fileId': '15167','title': 'Aoraki', 'embedUrl': 'https://zoomhub.net/p5NJO' },
 { 'fileId': '15172','title': 'Kilimanjaro', 'embedUrl': 'https://zoomhub.net/MVYq5' },
 { 'fileId': '15170', 'title': 'Mont Blanc', 'embedUrl': 'https://zoomhub.net/0wVl5' },
 { 'fileId': '15169', 'title': 'Sagarmatha','embedUrl': 'https://zoomhub.net/NVk0k' },
 { 'fileId': '15171', 'title': 'Tahoma','embedUrl': 'https://zoomhub.net/Zxqrk' }
]
</code></pre></div>    </div>
  </li>
</ol>

<p>You can use the following Python script.</p>
<ul>
  <li>replace <code class="language-plaintext highlighter-rouge">[pid]</code> with your dataset’s unique, persistent identifier in Borealis.</li>
  <li>replace <code class="language-plaintext highlighter-rouge">[base_url]</code> with <code class="language-plaintext highlighter-rouge">https://borealisdata.ca</code> (Borealis) or <code class="language-plaintext highlighter-rouge">https://demo.borealisdata.ca</code> (demo Borealis).</li>
  <li>replace <code class="language-plaintext highlighter-rouge">[email]</code> with your email address.</li>
</ul>

<p>Note that you will need to install <a href="https://pydataverse.readthedocs.io/en/latest/">pyDataverse</a>.</p>

<p><img aria-hidden="true" src="/assets/images/play.svg" class="arrow" /><a data-bs-toggle="collapse" role="button" href="#zoomhub-code" aria-controls="thumb-gallery-code" aria-expanded="false">Expand/collapse Python</a></p>

<div class="collapse" id="zoomhub-code">
  <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">#!/usr/bin/env python3
</span><span class="kn">import</span> <span class="nn">requests</span>
<span class="kn">import</span> <span class="nn">json</span>
<span class="kn">from</span> <span class="nn">pyDataverse.api</span> <span class="kn">import</span> <span class="n">NativeApi</span>

<span class="n">base_url</span> <span class="o">=</span> <span class="s">"[base_url]"</span>
<span class="n">doi</span> <span class="o">=</span> <span class="s">"[pid]"</span>
<span class="n">email</span> <span class="o">=</span> <span class="s">"[email]"</span>

<span class="n">api</span> <span class="o">=</span> <span class="n">NativeApi</span><span class="p">(</span><span class="n">base_url</span><span class="p">)</span>
<span class="n">dataset</span> <span class="o">=</span> <span class="n">api</span><span class="p">.</span><span class="n">get_dataset</span><span class="p">(</span><span class="n">doi</span><span class="p">)</span>
<span class="n">files_list</span> <span class="o">=</span> <span class="n">dataset</span><span class="p">.</span><span class="n">json</span><span class="p">()[</span><span class="s">'data'</span><span class="p">][</span><span class="s">'latestVersion'</span><span class="p">][</span><span class="s">'files'</span><span class="p">]</span>

<span class="n">ids_links_mapping</span> <span class="o">=</span> <span class="p">[]</span>

<span class="k">for</span> <span class="nb">file</span> <span class="ow">in</span> <span class="n">files_list</span><span class="p">:</span>
    <span class="n">file_id</span> <span class="o">=</span> <span class="nb">file</span><span class="p">[</span><span class="s">"dataFile"</span><span class="p">][</span><span class="s">"id"</span><span class="p">]</span>
    <span class="nb">dict</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="n">file_url</span> <span class="o">=</span> <span class="sa">f</span><span class="s">'</span><span class="si">{</span><span class="n">base_url</span><span class="si">}</span><span class="s">/api/access/datafile/</span><span class="si">{</span><span class="n">file_id</span><span class="si">}</span><span class="s">'</span>
    <span class="n">embed_url</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="sa">f</span><span class="s">'https://api.zoomhub.net/v1/content?url=</span><span class="si">{</span><span class="n">file_url</span><span class="si">}</span><span class="s">&amp;email=</span><span class="si">{</span><span class="n">email</span><span class="si">}</span><span class="s">'</span><span class="p">).</span><span class="n">json</span><span class="p">()[</span><span class="s">'embedUrl'</span><span class="p">]</span>
    <span class="nb">dict</span><span class="p">[</span><span class="s">'fileId'</span><span class="p">]</span> <span class="o">=</span> <span class="n">file_id</span>
    <span class="nb">dict</span><span class="p">[</span><span class="s">'title'</span><span class="p">]</span> <span class="o">=</span> <span class="nb">file</span><span class="p">[</span><span class="s">'dataFile'</span><span class="p">][</span><span class="s">'label'</span><span class="p">].</span><span class="n">split</span><span class="p">(</span><span class="s">'.'</span><span class="p">)[</span><span class="mi">0</span><span class="p">].</span><span class="n">capitalize</span><span class="p">()</span>
    <span class="nb">dict</span><span class="p">[</span><span class="s">'embedUrl'</span><span class="p">]</span> <span class="o">=</span> <span class="n">embed_url</span>
    <span class="n">ids_links_mapping</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="nb">dict</span><span class="p">)</span>

<span class="k">print</span><span class="p">(</span><span class="n">ids_links_mapping</span><span class="p">)</span>
</code></pre></div>  </div>
</div>

<h4 id="serve-the-viewers-via-html-and-javascript">Serve the viewers via HTML and JavaScript</h4>

<p>We’ll need to write some HTML to embed each viewer. For every viewer we will need the following code:</p>
<ul>
  <li>on line 1, replace <code class="language-plaintext highlighter-rouge">[fileId]</code> with the id of the file (you can get this from the python code in the previous step)</li>
  <li>inside the <code class="language-plaintext highlighter-rouge">src</code> attribute of the <code class="language-plaintext highlighter-rouge">script</code> tag on line 2:
    <ul>
      <li>replace <code class="language-plaintext highlighter-rouge">[zoomhubUrl]</code> with the embedUrl from the previous step</li>
      <li>replace <code class="language-plaintext highlighter-rouge">[width]</code> with the desired width of the viewer, for example <code class="language-plaintext highlighter-rouge">650px</code>.</li>
    </ul>
  </li>
</ul>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"modal-script"</span> <span class="na">data-modal-id=</span><span class="s">"modal-[fileId]"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"[zoomhubUrl].js?width=[width]&amp;height=auto&amp;border=none"</span><span class="nt">&gt;&lt;/script&gt;</span>
<span class="nt">&lt;/div&gt;</span>
</code></pre></div></div>

<ol>
  <li>If JQuery isn’t already included in your site, copy/paste the following in your <code class="language-plaintext highlighter-rouge">&lt;head&gt;</code> tag:
    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  &lt;script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"&gt;&lt;/script&gt;
</code></pre></div>    </div>
  </li>
  <li>You’ll also need to include Bootstrap 5 in <code class="language-plaintext highlighter-rouge">&lt;head&gt;</code>:
    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code> &lt;link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous"&gt;
 &lt;script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.min.js" integrity="sha384-QJHtvGhmr9XOIpI6YVutG+2QOK9T+ZnN4kzFN1RtK3zEFEIsxhlmWl5/YESvpZ13" crossorigin="anonymous"&gt;&lt;/script&gt;
</code></pre></div>    </div>
  </li>
  <li>Insert a <code class="language-plaintext highlighter-rouge">&lt;div&gt;</code> in your HTML where you want the images to render:
  <code class="language-plaintext highlighter-rouge">&lt;div id="thumb-gallery"&gt;&lt;/div&gt;</code></li>
  <li>Insert a container for the generated popups:
  <code class="language-plaintext highlighter-rouge">&lt;div class="modal-container"&gt;&lt;/div&gt;</code></li>
  <li>Copy/paste the following Javascript and
    <ul>
      <li>replace <code class="language-plaintext highlighter-rouge">[pid]</code> with your dataset’s unique, persistent identifier in Borealis.</li>
      <li>replace <code class="language-plaintext highlighter-rouge">[base_url]</code> with <code class="language-plaintext highlighter-rouge">https://borealisdata.ca</code> (Borealis) or <code class="language-plaintext highlighter-rouge">https://demo.borealisdata.ca</code> (demo Borealis).</li>
      <li>replace <code class="language-plaintext highlighter-rouge">[idsAndLinks]</code> with the the result from the Python script in the previous step.</li>
    </ul>
  </li>
</ol>

<p><a href="https://codepen.io/eltiffster/pen/MWVaEyZ">Example on CodePen</a>   <img aria-hidden="true" src="/assets/images/play.svg" class="arrow" /><a data-bs-toggle="collapse" role="button" href="#viewer-gallery-code" aria-controls="thumb-gallery-code" aria-expanded="false">Expand/collapse JavaScript</a></p>

<div class="collapse" id="viewer-gallery-code">
  <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">$</span><span class="p">(</span><span class="nb">document</span><span class="p">).</span><span class="nx">ready</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>

    <span class="kd">var</span> <span class="nx">pid</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">[pid]</span><span class="dl">"</span><span class="p">;</span> <span class="c1">// the persistent ID for your dataset</span>
    <span class="kd">var</span> <span class="nx">baseUrl</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">[base_url]</span><span class="dl">"</span><span class="p">;</span> <span class="c1">// The domain of the dataverse site</span>
    <span class="kd">var</span> <span class="nx">url</span> <span class="o">=</span> <span class="nx">baseUrl</span> <span class="o">+</span> <span class="dl">"</span><span class="s2">/api/datasets/:persistentId/?persistentId=</span><span class="dl">"</span> <span class="o">+</span> <span class="nx">pid</span> <span class="c1">// The url to make a request to</span>
    <span class="kd">var</span> <span class="nx">idsAndLinks</span> <span class="o">=</span> <span class="p">[</span><span class="nx">idsAndLinks</span><span class="p">]</span> <span class="c1">// Generated via a python script</span>

    <span class="nx">$</span><span class="p">.</span><span class="nx">ajax</span><span class="p">({</span>
        <span class="na">url</span><span class="p">:</span> <span class="nx">url</span><span class="p">,</span>
        <span class="na">type</span><span class="p">:</span> <span class="dl">"</span><span class="s2">GET</span><span class="dl">"</span><span class="p">,</span>
        <span class="na">success</span><span class="p">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span> <span class="nx">parseImageData</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span> <span class="p">}</span>
    <span class="p">});</span>

    <span class="kd">function</span> <span class="nx">parseImageData</span><span class="p">(</span><span class="nx">response</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">let</span> <span class="nx">files</span> <span class="o">=</span> <span class="nx">response</span><span class="p">[</span><span class="dl">'</span><span class="s1">data</span><span class="dl">'</span><span class="p">][</span><span class="dl">'</span><span class="s1">latestVersion</span><span class="dl">'</span><span class="p">][</span><span class="dl">'</span><span class="s1">files</span><span class="dl">'</span><span class="p">];</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">files</span><span class="p">);</span>
        <span class="kd">let</span> <span class="nx">arr</span> <span class="o">=</span> <span class="p">[];</span>
        <span class="c1">// Filter that returns only image files</span>
        <span class="k">for</span><span class="p">(</span><span class="nx">file</span> <span class="k">in</span> <span class="nx">files</span><span class="p">)</span> <span class="p">{</span> <span class="nx">arr</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">files</span><span class="p">[</span><span class="nx">file</span><span class="p">])</span> <span class="p">}</span>
        <span class="kd">let</span> <span class="nx">images</span> <span class="o">=</span> <span class="nx">arr</span><span class="p">.</span><span class="nx">filter</span><span class="p">(</span><span class="nx">file</span> <span class="o">=&gt;</span> <span class="nx">file</span><span class="p">.</span><span class="nx">dataFile</span><span class="p">.</span><span class="nx">contentType</span><span class="p">.</span><span class="nx">includes</span><span class="p">(</span><span class="dl">"</span><span class="s2">image</span><span class="dl">"</span><span class="p">));</span>
        <span class="c1">// console.log(images);</span>
        <span class="c1">// generate a link and thumbnail to each file</span>
        <span class="nx">$</span><span class="p">(</span><span class="dl">'</span><span class="s1">#thumb-gallery</span><span class="dl">'</span><span class="p">).</span><span class="nx">append</span><span class="p">(</span><span class="nx">images</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="nx">im</span> <span class="o">=&gt;</span> <span class="nx">viewerThumbTemplate</span><span class="p">(</span><span class="nx">im</span><span class="p">)));</span>
    <span class="p">}</span>

    <span class="kd">function</span> <span class="nx">viewerThumbTemplate</span><span class="p">(</span><span class="nx">image</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">let</span> <span class="nx">fileLink</span> <span class="o">=</span> <span class="nx">baseUrl</span> <span class="o">+</span> <span class="dl">"</span><span class="s2">/api/access/datafile/</span><span class="dl">"</span> <span class="o">+</span> <span class="nx">image</span><span class="p">.</span><span class="nx">dataFile</span><span class="p">.</span><span class="nx">id</span><span class="p">;</span>
        <span class="kd">let</span> <span class="nx">pageLink</span> <span class="o">=</span> <span class="nx">baseUrl</span> <span class="o">+</span> <span class="dl">"</span><span class="s2">/file.xhtml?fileId=</span><span class="dl">"</span> <span class="o">+</span> <span class="nx">image</span><span class="p">.</span><span class="nx">dataFile</span><span class="p">.</span><span class="nx">id</span><span class="p">;</span>
        <span class="kd">let</span> <span class="nx">title</span> <span class="o">=</span> <span class="nx">image</span><span class="p">.</span><span class="nx">label</span><span class="p">;</span>
        <span class="k">return</span> <span class="p">[</span>
            <span class="dl">'</span><span class="s1">&lt;a class="no-style" data-bs-toggle="modal" data-bs-target="#modal-</span><span class="dl">'</span> <span class="o">+</span> <span class="nx">image</span><span class="p">.</span><span class="nx">dataFile</span><span class="p">.</span><span class="nx">id</span> <span class="o">+</span> <span class="dl">'</span><span class="s1">"&gt;</span><span class="dl">'</span><span class="p">,</span>
                <span class="dl">'</span><span class="s1">&lt;figure&gt;</span><span class="dl">'</span><span class="p">,</span>
                    <span class="dl">'</span><span class="s1">&lt;img class="thumb" src="</span><span class="dl">'</span> <span class="o">+</span> <span class="nx">fileLink</span> <span class="o">+</span> <span class="dl">'</span><span class="s1">" alt="</span><span class="dl">'</span> <span class="o">+</span> <span class="nx">image</span><span class="p">.</span><span class="nx">description</span> <span class="o">+</span> <span class="dl">'</span><span class="s1">"/&gt;</span><span class="dl">'</span><span class="p">,</span>
                    <span class="dl">'</span><span class="s1">&lt;figcaption&gt;</span><span class="dl">'</span> <span class="o">+</span> <span class="nx">title</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="dl">"</span><span class="s2">.</span><span class="dl">"</span><span class="p">)[</span><span class="mi">0</span><span class="p">].</span><span class="nx">replace</span><span class="p">(</span><span class="dl">'</span><span class="s1">_</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1"> </span><span class="dl">'</span><span class="p">)</span> <span class="o">+</span> <span class="dl">'</span><span class="s1">&lt;/figcaption&gt;</span><span class="dl">'</span><span class="p">,</span>
                <span class="dl">'</span><span class="s1">&lt;/figure&gt;</span><span class="dl">'</span><span class="p">,</span>
            <span class="dl">'</span><span class="s1">&lt;/a&gt;</span><span class="dl">'</span>
        <span class="p">].</span><span class="nx">join</span><span class="p">(</span><span class="dl">'</span><span class="se">\n</span><span class="dl">'</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="kd">function</span> <span class="nx">viewerModalTemplate</span><span class="p">(</span><span class="nx">idAndLink</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="p">[</span>
            <span class="dl">'</span><span class="s1">&lt;div class="modal fade viewer" id="modal-</span><span class="dl">'</span> <span class="o">+</span> <span class="nx">idAndLink</span><span class="p">.</span><span class="nx">fileId</span> <span class="o">+</span> <span class="dl">'</span><span class="s1">" tabindex="-1" aria-labelledby="exampleModalLabel" data-backdrop="false" aria-hidden="true"&gt;</span><span class="dl">'</span><span class="p">,</span>
                <span class="dl">'</span><span class="s1">&lt;div class="modal-dialog"&gt;</span><span class="dl">'</span><span class="p">,</span>
                    <span class="dl">'</span><span class="s1">&lt;div class="modal-header"&gt;</span><span class="dl">'</span><span class="p">,</span>
                        <span class="dl">'</span><span class="s1">&lt;h5&gt;</span><span class="dl">'</span> <span class="o">+</span> <span class="nx">idAndLink</span><span class="p">.</span><span class="nx">title</span> <span class="o">+</span> <span class="dl">'</span><span class="s1">&lt;/h5&gt;</span><span class="dl">'</span><span class="p">,</span>
                        <span class="dl">'</span><span class="s1">&lt;a class="modal-link" href="</span><span class="dl">'</span> <span class="o">+</span> <span class="p">(</span><span class="nx">baseUrl</span> <span class="o">+</span> <span class="dl">"</span><span class="s2">/api/access/datafile/</span><span class="dl">"</span> <span class="o">+</span> <span class="nx">idAndLink</span><span class="p">.</span><span class="nx">fileId</span><span class="p">)</span> <span class="o">+</span> <span class="dl">'</span><span class="s1">"&gt;Download image&lt;/a&gt;</span><span class="dl">'</span><span class="p">,</span>
                        <span class="dl">'</span><span class="s1">&lt;a class="modal-link" href="</span><span class="dl">'</span> <span class="o">+</span> <span class="p">(</span><span class="nx">baseUrl</span> <span class="o">+</span> <span class="dl">"</span><span class="s2">/dataset.xhtml?persistentId=</span><span class="dl">"</span> <span class="o">+</span> <span class="nx">pid</span><span class="p">)</span> <span class="o">+</span> <span class="dl">'</span><span class="s1">" target="_blank"&gt;See dataset&lt;/a&gt;</span><span class="dl">'</span><span class="p">,</span>
                        <span class="dl">'</span><span class="s1">&lt;button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"&gt;&lt;/button&gt;</span><span class="dl">'</span><span class="p">,</span>
                    <span class="dl">'</span><span class="s1">&lt;/div&gt;</span><span class="dl">'</span><span class="p">,</span>
                <span class="dl">'</span><span class="s1">&lt;/div&gt;</span><span class="dl">'</span><span class="p">,</span>
            <span class="dl">'</span><span class="s1">&lt;/div&gt;</span><span class="dl">'</span>
        <span class="p">].</span><span class="nx">join</span><span class="p">(</span><span class="dl">'</span><span class="se">\n</span><span class="dl">'</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="kd">function</span> <span class="nx">injectViewer</span><span class="p">(</span><span class="nx">idAndLink</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">let</span> <span class="nx">modal</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="dl">'</span><span class="s1">#modal-</span><span class="dl">'</span> <span class="o">+</span> <span class="nx">idAndLink</span><span class="p">.</span><span class="nx">fileId</span><span class="p">);</span>
        <span class="kd">let</span> <span class="nx">viewer</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="dl">'</span><span class="s1">[data-modal-id="</span><span class="dl">'</span> <span class="o">+</span> <span class="nx">modal</span><span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="dl">'</span><span class="s1">id</span><span class="dl">'</span><span class="p">)</span> <span class="o">+</span> <span class="dl">'</span><span class="s1">"]</span><span class="dl">'</span><span class="p">);</span>
        <span class="nx">modal</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="dl">'</span><span class="s1">.modal-dialog</span><span class="dl">'</span><span class="p">).</span><span class="nx">append</span><span class="p">(</span><span class="nx">viewer</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="k">for</span> <span class="p">(</span><span class="nx">index</span> <span class="k">in</span> <span class="nx">idsAndLinks</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">$</span><span class="p">(</span><span class="dl">'</span><span class="s1">.modal-container</span><span class="dl">'</span><span class="p">).</span><span class="nx">append</span><span class="p">(</span><span class="nx">viewerModalTemplate</span><span class="p">(</span><span class="nx">idsAndLinks</span><span class="p">[</span><span class="nx">index</span><span class="p">]));</span>
        <span class="nx">injectViewer</span><span class="p">(</span><span class="nx">idsAndLinks</span><span class="p">[</span><span class="nx">index</span><span class="p">]);</span>
    <span class="p">}</span>

<span class="p">});</span>
</code></pre></div>  </div>
</div>

<h3 id="option-2-generate-and-host-images-locally">Option 2: Generate and host images locally</h3>

<p>Here are the general steps for creating zoomable images and viewers that are stored locally:</p>

<ol>
  <li>We’ll use the <a href="https://openseadragon.github.io/">Openseadragon</a> viewer. Since it requires a file format called DZI, we need to create DZI files from images using Python or another programming language before pushing them to Github Pages (see this page on <a href="https://openseadragon.github.io/examples/creating-zooming-images/">Creating Zooming Images</a>).</li>
  <li>Include the Javascript code needed for Openseadragon.</li>
  <li>Write some HTML/Javascript code that will include the viewer. See the example is below.</li>
</ol>

<div id="openseadragon1" style="width: 650px; height: 400px; margin-bottom:1rem;"></div>
<script src="/assets/openseadragon/openseadragon.min.js"></script>

<script type="text/javascript">
    var viewer = OpenSeadragon({
        id: "openseadragon1",
        prefixUrl: "/assets/openseadragon/images/",
        tileSources: "/assets/images/aoraki.dzi"
    });
</script>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"openseadragon1"</span> <span class="na">style=</span><span class="s">"width: 650px; height: 400px;"</span><span class="nt">&gt;&lt;/div&gt;</span>
<span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"/assets/openseadragon/openseadragon.min.js"</span><span class="nt">&gt;&lt;/script&gt;</span>
<span class="nt">&lt;script </span><span class="na">type=</span><span class="s">"text/javascript"</span><span class="nt">&gt;</span>
    <span class="kd">var</span> <span class="nx">viewer</span> <span class="o">=</span> <span class="nx">OpenSeadragon</span><span class="p">({</span>
        <span class="na">id</span><span class="p">:</span> <span class="dl">"</span><span class="s2">openseadragon1</span><span class="dl">"</span><span class="p">,</span>
        <span class="na">prefixUrl</span><span class="p">:</span> <span class="dl">"</span><span class="s2">/assets/openseadragon/images/</span><span class="dl">"</span><span class="p">,</span>
        <span class="na">tileSources</span><span class="p">:</span> <span class="dl">"</span><span class="s2">/assets/images/aoraki.dzi</span><span class="dl">"</span>
    <span class="p">});</span>
<span class="nt">&lt;/script&gt;</span>
</code></pre></div></div>


      <footer class="site-footer">
        
        <span class="site-footer-credits">This page was generated by <a href="https://pages.github.com">GitHub Pages</a>.</span>
      </footer>
    </main>
  </body>
</html>